apply    Service     "IfCheck-" for  (interface_name    =>    if_index    in    host.vars.interface)    {
    import    "generic-service"
    import "SNMP-BASIC-TEMPLATE"
 
    check_command        =    "Interface-check-command"
    display_name        =     "IfCheck-" + interface_name
 
 
 
    vars.throughput       =    "90%,95%"
    vars.error            =    "50,100"
    vars.service_type     =    "LINK"
    vars                +=    if_index
    
    check_interval = 1m
    retry_interval = 30s
    enable_perfdata = true
    action_url = "/grafana/dashboard-solo/db/thruk?histou.js%3ForgId=1&orgId=1&panelId=12&width=750&height=400&var-hostname=$host.name$&var-interfaces=$service.name$"
 
    assign    where    host.vars.interface
}
 
 

#apply Service "IfOptic-" for (interface_name    =>    if_index    in    host.vars.interface)    {
#    import    "generic-service"
#    import "SNMP-BASIC-TEMPLATE"
# 
#    check_command       = "check-snmp-with-oid-text-index"
#    display_name        = "IfOptic-" + interface_name
#  
#    vars.snmp_oid_text_index = "Optic." + interface_name
#    vars.snmp_oid_prefix = "1.3.6.1.4.1.2636.3.47.1.1.5.1.2"
#    
#    vars.snmp_units = "db"
#    vars.snmp_timeout = 10
#    vars.service_type     =    "OPTIC"
# 
#    check_interval = 30m
#    retry_interval = 20s
#    enable_perfdata = false
# 
# 
#    ignore where   match("*ae*", interface_name)
#    assign where   match("*ge*", interface_name) && match("*MX*",host.vars.model)
#    assign where   match("*xe*", interface_name) && match("*MX*",host.vars.model)
#}




apply    Service     "IfCRC-" for  (interface_name    =>    if_index    in    host.vars.interface)    {
    import    "generic-service"
    import "SNMP-BASIC-TEMPLATE"

    check_command        =    "snmp"
    display_name        =     "IfCRC-" + interface_name

    vars                +=    if_index
    vars.snmp_oid = "1.3.6.1.4.1.2636.3.3.1.1.9." + vars.if_index


    vars.snmp_timeout = 10
    vars.snmp_label = "IfCRC"
    vars.service_type = "LINK"

    
    check_interval = 30m
    retry_interval = 30s
    enable_perfdata = true

    action_url = "/grafana/dashboard-solo/db/interface-graph?histou.js%3ForgId=1&orgId=1&panelId=12&var-hostname=$host.name$&var-interface=$service.name$"
    assign    where    host.vars.interface
}


apply    Service     "ModuleTemp-" for  (interface_name    =>    if_index    in    host.vars.interface)    {
    import    "generic-service"
    import "SNMP-BASIC-TEMPLATE"

    display_name        =     "ModuleTemp-" + interface_name

    vars                +=    if_index
    vars.snmp_oid = "1.3.6.1.4.1.2636.3.60.1.1.1.1.8." + vars.if_index


    vars.snmp_crit = 55
    vars.snmp_warn = 50
    vars.snmp_units = "*C"
    vars.snmp_timeout = 10
    vars.snmp_label = "ModuleTemp"
    vars.service_type = "Module"

    
    check_interval = 30m
    retry_interval = 30s
    enable_perfdata = true

    action_url = "/grafana/dashboard-solo/db/thruk?histou.js%3ForgId=1&orgId=1&panelId=13&width=750&height=400&var-hostname=$host.name$&var-service=$service.name$"
    assign    where    host.vars.interface &&   match("*MX*", host.vars.model) &&   match("xe*", interface_name)
}
